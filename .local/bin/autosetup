#!/bin/bash -v

# home
cd ~

# package manager
if type "apt" > /dev/null 2>&1; then
	manager="apt"
	install="apt install -y"
elif type "dnf" > /dev/null 2>&1; then
	manager="dnf"
	install="dnf install -y"
fi

# git
sudo $install git

git init
git remote add origin https://github.com/devinalvaro/home
git fetch
git checkout -t origin/master

# build
sudo $install autoconf
sudo $install automake
sudo $install cmake
sudo $install pkg-config

# libs
sudo $install libevent-dev
sudo $install libncurses5-dev
sudo $install libncursesw5-dev
sudo $install libtool
sudo $install libtool-bin
sudo $install libc6:i386
sudo $install libncurses5:i386
sudo $install libstdc++6:i386
sudo $install lib32z1
sudo $install libbz2-1.0:i386

# clang
sudo $install clang
if [ $manager == "apt" ]; then sudo $install clang-format; fi

# java
if [ $manager == "apt" ]; then sudo $install openjdk-8-jdk; fi
if [ $manager == "dnf" ]; then sudo $install java-1.8.0-openjdk; fi

# cargo
sudo $install cargo

cargo install ripgrep

# npm
sudo $install npm

# pip
sudo $install python2-pip
sudo $install python3-pip

pip install --user jedi
pip install --user pylint
pip install --user yapf

# terminfo
infocmp $TERM | sed 's/kbs=^[hH]/kbs=\\177/' > $TERM.ti
tic $TERM.ti
rm $TERM.ti

# neovim
if [ $manager == "apt" ]; then
	sudo add-apt-repository -y ppa:neovim-ppa/stable
	sudo apt update -y 
fi

sudo $install neovim
pip install --user neovim

curl -fLo ~/.local/share/nvim/site/autoload/plug.vim --create-dirs https://raw.githubusercontent.com/junegunn/vim-plug/master/plug.vim
nvim -u NONE -U NONE -N -i NONE -c 'source .config/nvim/init.vim' -c 'PlugInstall' -c 'qa!'

# ranger
sudo $install ranger

# tmux
sudo $install tmux

# xsel
sudo $install xsel

# fonts
if [ $manager == "apt" ]; then sudo $install fonts-powerline; fi
if [ $manager == "dnf" ]; then sudo $install powerline-fonts; fi

# konsole
sed -i -e 's/,Regular//g' .config/kdeglobals

# yakuake
sudo $install yakuake

# drive
if [ $manager == "apt" ]; then
	sudo add-apt-repository -y ppa:twodopeshaggy/drive
	sudo apt update -y
	sudo $install drive
elif [ $manager == "dnf" ]; then
	sudo dnf copr enable -y vaughan/drive-google
	sudo $install drive-google
fi

# universal-tags
git clone https://github.com/universal-ctags/ctags.git
cd ctags

./autogen.sh 
./configure
make
sudo make install

cd ..
rm -rf ctags

# zsh
sudo $install zsh

git clone git://github.com/robbyrussell/oh-my-zsh.git ~/.oh-my-zsh
git clone git://github.com/zsh-users/zsh-autosuggestions ~/.oh-my-zsh/plugins/zsh-autosuggestions

curl -o - https://raw.githubusercontent.com/denysdovhan/spaceship-zsh-theme/master/spaceship.zsh > ~/.oh-my-zsh/themes/spaceship.zsh-theme

chsh -s $(which zsh)
