#!/bin/bash -v

# package manager
if type "apt" > /dev/null 2>&1; then
    install="apt install -y"
    distro="Ubuntu"
elif type "pacman" > /dev/null 2>&1; then
    install="pacman -S --noconfirm --needed"
    distro="Arch"
fi

# ppa
if [ $distro == "Ubuntu" ]; then
    sudo add-apt-repository ppa:neovim-ppa/stable

    sudo apt update
fi 

# git
sudo $install git

git init
git remote add origin https://github.com/devinalvaro/home
git fetch
git checkout -t origin/master

# ranger
sudo $install ranger

# grep
if [ $distro == "Ubuntu" ]; then
    sudo $install silversearcher-ag
else
    sudo $install ripgrep
fi

# tmux
sudo $install tmux

# xsel
sudo $install xsel

# go
if [ $distro == "Ubuntu" ]; then
    sudo $install golang-go
else
    sudo $install go
fi

# drive
# go get -u -v github.com/odeke-em/drive/cmd/drive
# drive init ~/.drive

# c
sudo $install clang
if [ $distro == "Ubuntu" ]; then
    sudo $install exuberant-ctags
else
    sudo $install ctags
fi

# python
sudo $install python-pip
sudo $install python2-pip
sudo $install python3-pip

pip install --user yapf
pip install --user pylint
pip install --user jedi

# npm
sudo $install npm

sudo npm install -g js-beautify
sudo npm install -g tldr

# terminfo
infocmp $TERM | sed 's/kbs=^[hH]/kbs=\\177/' > $TERM.ti
tic $TERM.ti
rm $TERM.ti

# neovim
sudo $install neovim
pip install --user neovim

curl -fLo ~/.local/share/nvim/site/autoload/plug.vim --create-dirs \
    https://raw.githubusercontent.com/junegunn/vim-plug/master/plug.vim
nvim -c 'PlugInstall' -c 'qa!'

# fzf
.fzf/install --all

# fonts
if [ $distro == "Arch" ]; then
    sudo $install powerline-fonts
elif [ $distro == "Ubuntu" ]; then
    sudo $install fonts-powerline
fi

# zsh
sudo $install zsh

git clone git://github.com/robbyrussell/oh-my-zsh.git ~/.oh-my-zsh
git clone git://github.com/zsh-users/zsh-autosuggestions ~/.oh-my-zsh/plugins/zsh-autosuggestions

curl -o - https://raw.githubusercontent.com/denysdovhan/spaceship-zsh-theme/master/spaceship.zsh > ~/.oh-my-zsh/themes/spaceship.zsh-theme

chsh -s $(which zsh)

# pacaur
if [ $distro == "Arch" ]; then
    curl -s https://gist.githubusercontent.com/Tadly/0e65d30f279a34c33e9b/raw/pacaur_install.sh | bash
    install="pacaur -S --noconfirm --needed"
fi

# redshift
if [ $distro == "Arch" ]; then
    sudo $install redshift-gtk-git
else
    sudo $install redshift-gtk
fi
