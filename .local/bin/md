#!/bin/sh

update=false

while getopts 'u' flag; do
  case "${flag}" in
    u) update=true ;;
    *) error "Unexpected option ${flag}" ;;
  esac
done


file="${@: -1}"
target=/tmp/md/"$(basename "$file" .md)".html

mkdir -p $(dirname $target)

marked $file > $target
echo '<meta charset="utf-8">' >> $target

if [ $update = false ]; then
    xdg-open $target
fi
