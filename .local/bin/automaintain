#!/usr/bin/env bash
set -v

# variables
if type apt-get &> /dev/null; then
    autoremove='sudo apt-get -y autoremove'
    upgrade='eval sudo apt-get -y update && sudo apt-get -y upgrade'
elif type dnf &> /dev/null; then
    autoremove='sudo dnf -y autoremove'
    upgrade='sudo dnf -y upgrade'
elif type pacman &> /dev/null; then
    autoremove='yay -Rns --noconfirm '"$(yay -Qdtq)"
    upgrade='yay -Syu --needed --noconfirm --answeredit none'
fi

# --------------------------------

# system
$upgrade

# vim
nvim +PlugUpgrade +qall && nvim +PlugUpdate +qall

# zsh
zsh -i -c 'antigen update'

# ----------------

# go
nvim +GoUpdateBinaries +qall

# node
yarn global add --latest javascript-typescript-langserver

# python
pip install --user -U 'python-language-server[all]'

# ruby
gem update solargraph

# --------------------------------

# remove orphan packages
$autoremove

# clean vim plugins
nvim +PlugClean +qall
