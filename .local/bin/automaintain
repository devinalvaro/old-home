#!/usr/bin/env bash
set -v

# variables
if type apt-get > /dev/null 2>&1; then
    autoclean='sudo apt-get -y autoclean'
    autoremove='sudo apt-get -y autoremove'
    upgrade='sudo apt-get -y update && sudo apt-get -y upgrade'
elif type pacman > /dev/null 2>&1; then
    autoclean='yay -Sc --noconfirm'
    autoremove='yay -Rns --noconfirm '"$(yay -Qdtq)"
    upgrade='yay -Syu --needed --noconfirm --answeredit none'
fi

# --------------------------------

# pacman
$upgrade

# vim
nvim +PlugUpgrade +qall
nvim +PlugUpdate +qall

# zsh
zsh -i -c 'antigen update'

# ----------------

# pip
pip install -U --upgrade-strategy only-if-needed 'python-language-server[all]'

# yarn
yarn global upgrade

# --------------------------------

# remove orphan packages
$autoremove

# clean package archives
$autoclean

# clean vim plugins
nvim +PlugClean +qall
