#!/usr/bin/env bash
set -v

# variables
if type apt-get > /dev/null 2>&1; then
    autoclean='sudo apt-get -y autoclean'
    autoremove='sudo apt-get -y autoremove'
    upgrade='eval sudo apt-get -y update && sudo apt-get -y upgrade'
elif type pacman > /dev/null 2>&1; then
    autoclean='yay -Sc --noconfirm'
    autoremove='yay -Rns --noconfirm '"$(yay -Qdtq)"
    upgrade='yay -Syu --needed --noconfirm --answeredit none'
fi

# --------------------------------

# system
$upgrade

# vim
nvim +PlugUpgrade +qall
nvim +PlugUpdate +qall

# zsh
zsh -i -c 'antigen update'

# ----------------

# gem
gem update

# go
nvim +GoUpdateBinaries +qall

# pip
pip freeze --user | grep -v '^\-e' | cut -d = -f 1  | xargs -n1 pip install -U

# yarn
yarn global upgrade

# --------------------------------

# remove orphan packages
$autoremove

# clean package archives
$autoclean

# clean vim plugins
nvim +PlugClean +qall
