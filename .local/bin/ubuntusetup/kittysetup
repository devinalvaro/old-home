#!/bin/bash -v

# variables
install='sudo apt-get -y install'
remove='sudo apt-get -y remove'

install_dir=/usr/local/share/kitty
bin_path=/usr/local/bin/kitty

kitty_bin=
"#!/usr/bin/env python3

import runpy
runpy.run_path('/usr/local/share/kitty', run_name='__main__')"

# --------------------------------

# clone
git clone https://github.com/kovidgoyal/kitty && cd kitty/

# install dependencies
$install build-essential \
    pkg-config \
    libharfbuzz-dev \
    libpng-dev \
    libfontconfig-dev \
    libgl-dev \
    python3-dev \
    libxkbcommon-x11-dev \
    xorg-dev

# make
make && cd ..

# remove dependencies
$remove build-essential \
    pkg-config \
    libxkbcommon-x11-dev \
    xorg-dev

# install
sudo mv kitty $install_dir

echo $kitty_bin > $bin_path
sudo chmod +x $bin_path
