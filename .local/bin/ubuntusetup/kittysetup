#!/usr/bin/env bash
set -v

# variables
install='sudo apt-get -y install'
remove='sudo apt-get -y remove'

# --------------------------------

# clone
git clone https://github.com/kovidgoyal/kitty /tmp/kitty && cd /tmp/kitty

# install dependencies
$install build-essential \
    pkg-config \
    libharfbuzz-dev \
    libpng-dev \
    libfontconfig-dev \
    libgl-dev \
    python3-dev \
    libxkbcommon-x11-dev \
    xorg-dev

# setup
python3 setup.py linux-package

# remove build dependencies
$remove build-essential \
    pkg-config \
    libxkbcommon-x11-dev \
    xorg-dev

# install
cd linux-package

sudo install -d /usr/{bin,lib,share}
sudo cp -r bin/* /usr/bin/
sudo cp -r lib/* /usr/lib/
sudo cp -r share/* /usr/share/

sudo install -d /usr/share/pixmaps/
sudo mv /usr/share/icons/hicolor/256x256/apps/kitty.png /usr/share/pixmaps/
