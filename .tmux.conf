# prefix
unbind-key C-b
set -g prefix `
bind-key ` send-prefix

# $TERM
set -g default-terminal 'screen-256color'
set -g terminal-overrides ',xterm-256color:Tc'

# auto window rename
set -g automatic-rename

# auto renumber window
set -g renumber-windows on

# base-1 indexing
set -g base-index 1
set -g pane-base-index 1

# escape time
set -s escape-time 0

# scrollback buffer
set -g history-limit 100000

# vim focus issues fix
set -g focus-events off

# status
set -g status off
set -g status-interval 1
set -g status-left ''
set -g status-right ''

# window status
set -g window-status-current-format '#[fg=black,bg=white] #I #[fg=black,bg=white]#W '
set -g window-status-format '#[fg=white,bg=black] #I #[fg=white,bg=black]#W '

# colors
set -g status-bg black
set -g status-fg white

set -g display-panes-colour black
set -g display-panes-active-colour brightblack
set -g pane-border-fg brightblack
set -g pane-active-border-bg black
set -g pane-active-border-fg brightblack

set -g message-fg black
set -g message-bg brightblack

# emacs bindings
set -g status-keys emacs

# vi bindings
set -g mode-keys vi

bind-key -T copy-mode-vi 'v' send-keys -X begin-selection
bind-key -T copy-mode-vi 'V' send-keys -X select-line
bind-key -T copy-mode-vi 'C-v' send-keys -X rectangle-toggle
bind-key -T copy-mode-vi 'y' send-keys -X copy-pipe 'xclip -selection c'

# reload bindings
bind-key 'r' source-file ~/.tmux.conf \; display-message 'Config reloaded.'

# status bindings
bind-key 'space' set -g status

# new window bindings
bind-key 't' new-window -a -c '#{pane_current_path}'
bind-key 'h' new-window -a -c '~'

# pane split bindings
bind-key 'v' split-window -h -c '#{pane_current_path}'
bind-key 's' split-window -v -c '#{pane_current_path}'

# pane kill bindings
bind-key 'c' kill-pane
bind-key 'o' kill-pane -a
bind-key 'x' kill-window

# pane resize bindings
bind-key -r 'H' resize-pane -L 8
bind-key -r 'J' resize-pane -D 4
bind-key -r 'K' resize-pane -U 4
bind-key -r 'L' resize-pane -R 8

# pane movement bindings
is_vim="ps -o state= -o comm= -t '#{pane_tty}' \
    | grep -iqE '^[^TXZ ]+ +(\\S+\\/)?g?(view|n?vim?x?)(diff)?$'"

bind-key -r 'h' if-shell '$is_vim' 'send-keys `h' 'select-pane -L'
bind-key -r 'j' if-shell '$is_vim' 'send-keys `j' 'select-pane -D'
bind-key -r 'k' if-shell '$is_vim' 'send-keys `k' 'select-pane -U'
bind-key -r 'l' if-shell '$is_vim' 'send-keys `l' 'select-pane -R'

bind-key -T copy-mode-vi 'h' if-shell '$is_vim' 'send-keys `h' 'select-pane -L'
bind-key -T copy-mode-vi 'j' if-shell '$is_vim' 'send-keys `j' 'select-pane -D'
bind-key -T copy-mode-vi 'k' if-shell '$is_vim' 'send-keys `k' 'select-pane -U'
bind-key -T copy-mode-vi 'l' if-shell '$is_vim' 'send-keys `l' 'select-pane -R'

# window movement bindings
bind-key -n 'M-1' select-window -t 1
bind-key -n 'M-2' select-window -t 2
bind-key -n 'M-3' select-window -t 3
bind-key -n 'M-4' select-window -t 4
bind-key -n 'M-5' select-window -t 5
bind-key -n 'M-6' select-window -t 6
bind-key -n 'M-7' select-window -t 7
bind-key -n 'M-8' select-window -t 8
bind-key -n 'M-9' select-window -t 9

# window swap bindings
bind-key 'M-1' swap-window -t 1
bind-key 'M-2' swap-window -t 2
bind-key 'M-3' swap-window -t 3
bind-key 'M-4' swap-window -t 4
bind-key 'M-5' swap-window -t 5
bind-key 'M-6' swap-window -t 6
bind-key 'M-7' swap-window -t 7
bind-key 'M-8' swap-window -t 8
bind-key 'M-9' swap-window -t 9
